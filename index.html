<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Photos TRMNL Plugin - Live Demo</title>
    <link rel="icon" type="image/png" href="assets/icon/trmnl-google-photos.png">
    <meta property="og:image" content="assets/icon/trmnl-google-photos.png">
    <meta property="og:title" content="Google Photos TRMNL Plugin">
    <meta property="og:description" content="Display random photos from your Google Photos shared albums on TRMNL e-ink displays">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://usetrmnl.com/css/latest/plugins.css">
    <link rel="stylesheet" href="assets/www/styles.css">
</head>
<body>
    <div class="container">
        <h1>
            <img src="assets/icon/google-photos-icon.png" alt="Google Photos" style="width: 48px; height: 48px; vertical-align: middle; margin-right: 12px;">
            Google Photos TRMNL Plugin
            <span id="statusBadge" class="status-badge status-checking" onclick="checkServiceStatus()" data-tooltip="Click to refresh">üü° Checking...</span>
        </h1>
        <div style="text-align: center; margin-bottom: 1.5rem;">
            <a href="https://usetrmnl.com/recipes/227153" target="_blank" style="text-decoration: none;">
                <img src="assets/trmnl-brand/trmnl-badge-show-it-on-dark.svg" alt="Show it on TRMNL" style="height: 42px; transition: transform 0.2s ease; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
            </a>
        </div>
        <p class="description">
            Display random photos from your Google Photos shared albums on TRMNL devices.<br>
            <strong>Architecture:</strong> JSON API (Polling) - Worker returns data, TRMNL renders templates
        </p>

        <div class="demo-section">
            <h2>üé¨ JSON API Demo</h2>
            <p>Test the JSON API endpoint with your Google Photos shared album URL. The backend returns photo data as JSON!</p>
            
            <div class="demo-controls">
                <input 
                    type="text" 
                    id="albumUrl" 
                    placeholder="Paste your Google Photos album URL (photos.app.goo.gl/...)" 
                    value="https://photos.app.goo.gl/ENK6C44K85QgVHPH8"
                >
                <button onclick="fetchPhotoData()" id="fetchBtn">üîÑ Fetch Photo Data</button>
            </div>
            
            <div class="example-urls">
                <strong>Demo album:</strong> <a onclick="useExampleUrl()">Use example album</a> | 
                <strong>API Docs:</strong> <a href="https://github.com/hossain-khan/trmnl-google-photos-plugin/blob/main/docs/API_DOCUMENTATION.md" target="_blank">View documentation</a>
            </div>
            
            <div id="errorContainer"></div>
            
            <div id="jsonOutput" class="preview-container" style="display: none;">
                <div class="split-view">
                    <div class="json-panel">
                        <h3>üìã JSON Response</h3>
                        <pre id="jsonContent" style="text-align: left; padding: 20px; overflow: auto; margin: 0;"></pre>
                    </div>
                    <div class="image-preview-panel">
                        <h3>üñºÔ∏è Photo Preview</h3>
                        <div class="image-preview-content" id="imagePreviewContent">
                            <div class="spinner"></div>
                        </div>
                        <div class="image-info" id="imageInfo" style="display: none;"></div>
                    </div>
                </div>
            </div>
            
            <div id="previewContainer" class="preview-container">
                <div class="preview-empty">
                    <div style="font-size: 48px; margin-bottom: 10px;">üì∑</div>
                    <p>Enter a Google Photos album URL and click "Fetch Photo Data" to see the JSON response!</p>
                    <div class="demo-gallery">
                        <div class="demo-gallery-item" onclick="openLightbox('assets/demo/demo-full.png', 'Full Layout')">
                            <img src="assets/demo/demo-full.png" alt="Full Layout Demo">
                            <div class="demo-gallery-item-label">Full Layout</div>
                        </div>
                        <div class="demo-gallery-item" onclick="openLightbox('assets/demo/demo-half-horizontal.png', 'Half Horizontal')">
                            <img src="assets/demo/demo-half-horizontal.png" alt="Half Horizontal Demo">
                            <div class="demo-gallery-item-label">Half Horizontal</div>
                        </div>
                        <div class="demo-gallery-item" onclick="openLightbox('assets/demo/demo-half-vertical.png', 'Half Vertical')">
                            <img src="assets/demo/demo-half-vertical.png" alt="Half Vertical Demo">
                            <div class="demo-gallery-item-label">Half Vertical</div>
                        </div>
                        <div class="demo-gallery-item" onclick="openLightbox('assets/demo/demo-quadrant.png', 'Quadrant Layout')">
                            <img src="assets/demo/demo-quadrant.png" alt="Quadrant Layout Demo">
                            <div class="demo-gallery-item-label">Quadrant</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="setup-instructions" class="demo-section setup-info">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h2 style="margin: 0;">üöÄ Setup Instructions</h2>
                <div class="badge-container">
                    <a href="https://usetrmnl.com/recipes/227153" target="_blank" style="text-decoration: none;">
                        <img src="assets/trmnl-brand/trmnl-badge-show-it-on-light.svg" 
                             id="showTrmnlBadge"
                             alt="Show it on TRMNL" 
                             style="height: 42px; opacity: 0.7; cursor: pointer; transition: opacity 0.2s ease;"
                             onmouseover="this.style.opacity='1'"
                             onmouseout="this.style.opacity='0.7'">
                    </a>
                </div>
            </div>
            <p>Get started with the Google Photos TRMNL plugin in just a few simple steps:</p>
            <ol>
                <li>Create a shared album in Google Photos</li>
                <li>Get the shared album link (photos.app.goo.gl/...)</li>
                <li><a href="https://usetrmnl.com/recipes/227153" target="_blank">Install the plugin from TRMNL marketplace</a></li>
                <li>Paste your shared album URL in the plugin settings</li>
                <li>Add to your TRMNL playlist</li>
            </ol>
            <div style="background: #f7fafc; border-left: 4px solid #48bb78; padding: 1rem 1.25rem; border-radius: 8px; margin-top: 1.5rem;">
                <p style="margin: 0 0 0.5rem 0;"><strong>üì° Current Status</strong> <span class="status-badge-inline">‚úì Live</span></p>
                <p style="margin: 0 0 0.5rem 0; font-size: 0.95rem;">JSON API is operational! Worker returns photo data as JSON. TRMNL platform renders templates stored in Markup Editor.</p>
                <p style="margin: 0; font-size: 0.9rem; color: #718096;"><strong>Architecture:</strong> Polling strategy (GET /api/photo) - Worker returns JSON, not HTML. TRMNL handles all template rendering.</p>
            </div>
        </div>

        <div class="github-link">
            <p>
                <strong>For Developers:</strong> 
                <a href="https://github.com/hossain-khan/trmnl-google-photos-plugin" target="_blank">
                    View on GitHub ‚Üí
                </a>
            </p>
        </div>
    </div>

    <!-- Lightbox for demo images -->
    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <div class="lightbox-content" onclick="event.stopPropagation()">
            <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
            <img id="lightboxImage" src="" alt="">
            <div id="lightboxLabel" class="lightbox-label"></div>
        </div>
    </div>

    <script src="assets/www/script.js"></script>
</body>
</html>
