{% comment %}
  Map edge brightness score (0-100) to TRMNL background shade class
  
  Usage:
    {% render "map_brightness_to_background", edge_score: edge_brightness_score %}
    Output: Sets variable 'bg_class' with background class (e.g., "bg--gray-50")
  
  Strategy: Match/Blend - Dark edges â†’ Dark background
  
  TRMNL Framework has 16-level palette:
  - bg--black (darkest)
  - bg--gray-10 through bg--gray-75 (14 gray shades)
  - bg--white (lightest)
  
  Each level covers ~6.25 points on 0-100 scale (100 / 16 = 6.25)
  
  Reference: https://usetrmnl.com/framework/background
{% endcomment %}

{% if edge_score %}
  {% assign score = edge_score | times: 1.0 %}
  
  {% if score < 6.25 %}
    {% assign bg_class = "bg--black" %}
  {% elsif score < 12.5 %}
    {% assign bg_class = "bg--gray-10" %}
  {% elsif score < 18.75 %}
    {% assign bg_class = "bg--gray-15" %}
  {% elsif score < 25 %}
    {% assign bg_class = "bg--gray-20" %}
  {% elsif score < 31.25 %}
    {% assign bg_class = "bg--gray-25" %}
  {% elsif score < 37.5 %}
    {% assign bg_class = "bg--gray-30" %}
  {% elsif score < 43.75 %}
    {% assign bg_class = "bg--gray-35" %}
  {% elsif score < 50 %}
    {% assign bg_class = "bg--gray-40" %}
  {% elsif score < 56.25 %}
    {% assign bg_class = "bg--gray-45" %}
  {% elsif score < 62.5 %}
    {% assign bg_class = "bg--gray-50" %}
  {% elsif score < 68.75 %}
    {% assign bg_class = "bg--gray-55" %}
  {% elsif score < 75 %}
    {% assign bg_class = "bg--gray-60" %}
  {% elsif score < 81.25 %}
    {% assign bg_class = "bg--gray-65" %}
  {% elsif score < 87.5 %}
    {% assign bg_class = "bg--gray-70" %}
  {% elsif score < 93.75 %}
    {% assign bg_class = "bg--gray-75" %}
  {% else %}
    {% assign bg_class = "bg--white" %}
  {% endif %}
{% else %}
  {% assign bg_class = "" %}
{% endif %}
