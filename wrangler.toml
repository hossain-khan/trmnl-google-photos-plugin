name = "trmnl-google-photos"
main = "src/index.ts"
compatibility_date = "2026-01-18"
compatibility_flags = ["nodejs_compat"]

# Account ID and Workers.dev subdomain
# account_id will be set via wrangler login or environment variables
workers_dev = true

# Environment variables
[vars]
ENVIRONMENT = "production"
# Discord webhook for alerting (brightness analysis timeout notifications)
DISCORD_WEBHOOK_URL = "https://discord.com/api/webhooks/1465364273361588245/GuXXz27e6zBkhW8bXobN0OQkSoFYmBVnJdDSdFyftd0BEXZUbuB4uOxnEDV_H3lHTwnC"

# Observability - Logs and Traces for debugging
[observability]
enabled = false
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = false
persist = true
head_sampling_rate = 1

# KV namespace bindings (optional - for caching)
# Production namespace for caching album photo data (1-hour TTL)
[[kv_namespaces]]
binding = "PHOTOS_CACHE"
id = "737dfeaef9a142689b8896ed818fb615"
preview_id = "0f390773e0dd4585a294297abca36df5"

# Limits and resources
# Note: CPU limits are not supported on the Free plan
# [limits]
# cpu_ms = 50  # 50ms CPU time limit for paid plans only
